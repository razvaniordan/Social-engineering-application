"use strict";(self.webpackChunkraiffeisen_pi=self.webpackChunkraiffeisen_pi||[]).push([[3581],{43581:(y,c,n)=>{n.r(c),n.d(c,{SendFeedbackModule:()=>$});var l=n(36895),m=n(66159),d=n(89383),o=n(188),f=n(39841),h=n(91772),u=n(83009),e=n(94650),p=n(97898),g=n(22977);function v(t,S){if(1&t){const r=e.EpF();e.TgZ(0,"iframe",4),e.NdJ("load",function(){e.CHM(r);const a=e.oxw();return e.KtG(a.loadingIframe=!1)}),e.ALo(1,"safe"),e.qZA()}if(2&t){const r=e.oxw();e.Q6J("src",e.xi3(1,1,r.iframeUrl,"resourceUrl"),e.uOi)}}function b(t,S){1&t&&(e._UZ(0,"ui-rzbr-no-info",5),e.ALo(1,"translate")),2&t&&e.Q6J("message",e.lcZ(1,1,"errors__medallia__request_failed"))}const F=[{component:(()=>{class t extends u.O{constructor(r,s,a){super(),this.authFacade=r,this.envService=s,this.dynamicLocaleService=a,this.iframeUrl="",this.loadingIframe=!0,this.error=!1}ngOnInit(){this.authFacade.resetError(),this.authFacade.getUserName(),this.registerSubscriptions((0,f.a)([this.authFacade.userData$,this.dynamicLocaleService.locale$]).subscribe(([r,s])=>{if(this.loadingIframe=!0,r){const a=r.authData.user,I=r.authData.branchName,C=`${this.envService.env.cdnPath}/portal/medallia/index.html`;let i=`lang=${s}`;i+=`&fid=${h.tl.MEDALLIA_FID}`,i+=`&cif=${a.id}`,i+=`&name=${a.firstName}`,i+=`&surname=${a.lastName}`,i+=`&emailAddress=${a.email}`,i+=`&phoneNumber=${a.primaryMobilePhone.replace(/\s/g,"")}`,i+=`&branch=${I}`,i+=`&clientType=${a.segmentation.root}`,this.iframeUrl=`${C}?${i}`}else this.error=!0}))}static#e=this.\u0275fac=function(s){return new(s||t)(e.Y36(p.j),e.Y36(g.D),e.Y36(o.Qmw))};static#t=this.\u0275cmp=e.Xpm({type:t,selectors:[["ui-rzbr-send-feedback"]],features:[e.qOj],decls:4,vars:4,consts:[[1,"sendFeedback"],[3,"showLoader","fullPage"],["title","",3,"src","load",4,"ngIf"],[3,"message",4,"ngIf"],["title","",3,"src","load"],[3,"message"]],template:function(s,a){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"ui-rzbr-preloader",1),e.YNc(2,v,2,4,"iframe",2),e.YNc(3,b,2,3,"ui-rzbr-no-info",3),e.qZA()),2&s&&(e.xp6(1),e.Q6J("showLoader",a.loadingIframe)("fullPage",!1),e.xp6(1),e.Q6J("ngIf",a.iframeUrl),e.xp6(1),e.Q6J("ngIf",!a.loadingIframe&&a.error))},dependencies:[l.O5,o.lDN,o.qbt,d.X$,o.ylS],styles:[".sendFeedback[_ngcontent-%COMP%]{height:550px}"],changeDetection:0})}return t})(),path:""}];let $=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.oAB({type:t});static#a=this.\u0275inj=e.cJS({imports:[l.ez,d.aw,m.Bz.forChild(F),o.dvI,o._$z,o.ZZ]})}return t})()}}]);